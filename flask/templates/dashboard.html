<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cycle Renting - Dashboard</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f6f9;
        }

        /* Navbar */
        .navbar {
            background-color: #2c3e50;
            padding: 15px 20px;
            color: white;
            text-align: center;
            font-size: 24px;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 250px;
            background-color: #34495e;
            padding: 20px;
            color: white;
            box-shadow: 2px 0px 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar a {
            display: block;
            padding: 10px 15px;
            color: white;
            text-decoration: none;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .sidebar a:hover {
            background-color: #1abc9c;
            border-radius: 5px;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            padding: 20px;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        /* Dashboard Cards */
        .card-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .card {
            width: 300px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .card h2 {
            font-size: 22px;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .card p {
            font-size: 16px;
            color: #7f8c8d;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table, th, td {
            border: 1px solid #ddd;
            padding: 12px;
        }

        th {
            background-color: #2c3e50;
            color: white;
        }

        td {
            text-align: center;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            background-color: #34495e;
            color: white;
            position: fixed;
            bottom: 0;
            width: 100%;
            left: 0;
            margin-left: 260px;
        }

    </style>
</head>
<body>

    <!-- Navbar -->
    <div class="navbar">
        Cycle Renting Dashboard
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Menu</h2>
        <a href="#">Home</a>
        <a href="#">Bicycle Availability</a>
        <a href="#">Rental History</a>
        <a href="#">Payments</a>
        <a href="#">Logout</a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h1>Welcome to the Cycle Rental Dashboard</h1>

        <!-- Cards for Overview -->
        <div class="card-container">
            <div class="card">
                <h2>Bicycles Available</h2>
                <p id="availableBikes">Loading...</p>
            </div>
            <div class="card">
                <h2>Total Rentals</h2>
                <p id="totalRentals">Loading...</p>
            </div>
            <div class="card">
                <h2>Amount Due</h2>
                <p id="amountDue">₹0.00</p>
            </div>
        </div>

        <!-- Bicycle Renting Section -->
        <h2>Bicycles</h2>
        <table>
            <thead>
                <tr>
                    <th>Bicycle ID</th>
                    <th>Location</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="bicycleList">
                <tr>
                    <td colspan="3">No bicycles available at the moment.</td>
                </tr>
            </tbody>
        </table>

        <!-- Table for Rental History -->
        <h2>Rental History</h2>
        <table>
            <thead>
                <tr>
                    <th>Bicycle ID</th>
                    <th>Rent Time</th>
                    <th>Return Time</th>
                    <th>Rental Fee</th>
                </tr>
            </thead>
            <tbody id="rentalHistory">
                <tr>
                    <td colspan="4">No rental history available.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Footer -->
    <footer>
        Cycle Renting System © 2024
    </footer>

    <!-- JavaScript for Dynamic Updates -->
    <script>
        class Bicycle {
            constructor(reg_number, location) {
                this.reg_number = reg_number;
                this.is_available = true;
                this.current_renter = null;
                this.rent_time = null;
                this.location = location;
            }
        }

        class RentalSystem {
            constructor() {
                this.bicycles = {};
                this.rental_rate_per_minute = 1;
                this.owed_amounts = {};
                this.user_credentials = {};
            }

            add_bicycle(reg_number, location) {
                if (!(reg_number in this.bicycles)) {
                    this.bicycles[reg_number] = new Bicycle(reg_number, location);
                    console.log(`Bicycle ${reg_number} added to the system at location '${location}'.`);
                } else {
                    console.log(`Bicycle ${reg_number} already exists.`);
                }
            }

            register_student(student_id, password) {
                if (!(student_id in this.user_credentials)) {
                    this.user_credentials[student_id] = password;
                    console.log(`Student ${student_id} registered successfully.`);
                } else {
                    console.log(`Student ${student_id} is already registered.`);
                }
            }

            validate_login(student_id, password) {
                return this.user_credentials[student_id] === password;
            }

            rent_bicycle(student_id) {
                const availableBicycles = Object.values(this.bicycles).filter(bicycle => bicycle.is_available);
                if (availableBicycles.length === 0) {
                    console.log("No bicycles available for rent.");
                    return;
                }

                const bicycle = availableBicycles[0];
                bicycle.is_available = false;
                bicycle.current_renter = student_id;
                bicycle.rent_time = new Date();
                this.owed_amounts[student_id] = this.owed_amounts[student_id] || 0;

                console.log(`Bicycle ${bicycle.reg_number} rented to student ${student_id} at ${bicycle.rent_time}.`);
            }

            return_bicycle(reg_number, student_id, drop_location) {
                if (reg_number in this.bicycles) {
                    const bicycle = this.bicycles[reg_number];
                    if (bicycle.current_renter === student_id) {
                        const rental_duration = new Date() - bicycle.rent_time;
                        const rental_minutes = rental_duration / (1000 * 60);
                        const rental_fee = rental_minutes * this.rental_rate_per_minute;
                        this.owed_amounts[student_id] += rental_fee;

                        bicycle.is_available = true;
                        bicycle.current_renter = null;
                        bicycle.rent_time = null;
                        bicycle.location = drop_location;

                        console.log(`Bicycle ${reg_number} returned at ${drop_location}. Rental fee: ₹${rental_fee.toFixed(2)}`);
                        console.log(`Total amount owed by student ${student_id}: ₹${this.owed_amounts[student_id].toFixed(2)}`);
                    } else {
                        console.log("You cannot return this bicycle as it was not rented to you.");
                    }
                } else {
                    console.log("This bicycle does not exist in the system.");
                }
            }
        }

        const rentalSystem = new RentalSystem();
        rentalSystem.add_bicycle("0001", "MGR building");
        rentalSystem.add_bicycle("0002", "Library");
        rentalSystem.add_bicycle("0003", "Canteen");

        // Simulated data
        const studentId = "STUDENT_ID";
        rentalSystem.register_student(studentId, "password123");

        document.getElementById('availableBikes').innerText = Object.keys(rentalSystem.bicycles).length;
        document.getElementById('totalRentals').innerText = "0";

    </script>

</body>
</html>
